!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jquery_validate=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t,a){var n=t.prop(a);return""!==n&&null!=n&&"object"!=e(n)||(n=t.attr(a)),""!==n&&null!=n||(n=t.data(a)),n}function a(e){return e.attr("name")||e.data("name")}var n=/[\\'"]/g,i=/^[a-z]{3,7}\:\/\/[a-z0-9]/i,r=/^[a-z0-9][0-9a-z_\-]*(?:\.[a-z0-9][0-9a-z_\-]*)*$/,l=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;function u(e){return String(e).replace(n,"\\$&")}function o(e){return r.test(e)}function s(e){return i.test(e)}function d(e){return l.test(e)}function f(e,t){for(var a,n=e.length,i=n>1?e.constructor([0]):e,r=-1;++r<n&&(i[0]=a=e[r])&&(!r||(i.context=a))&&!1!==t.call(a,r,i,a););return e}var c="string",v="number",F="function",m="valid",p="invalid",h=".vldtr";function g(n){function i(t,a,i){var r=this,u=["keyup","input","blur","focusout","change","paste","cut","validate"].join(h+" ")+h;if(e(t)==c)switch(t){case"validate":return n.fn.validate.call(r,a,i);case"refresh":return l.call(r);case"off":return r.off(u,n.fn.validator.handler);case"on":return r.on(u,n.fn.validator.handler)}return t=_(t),f(r,(function(e,a){var i=n.extend(!0,{_invalids:{}},t,a.data("validatorOpt")||{});a.on("dom:update",l).on(u,n.fn.validator.handler).data("validatorOpt",i)})).attr("novalidate","novalidate"),l.call(r,void 0,!0),r}function r(t,i,r,l,f){var h,g,x,_=n(t),b="validatorRes",D=_.val(),y=D,C=_.data(p),E={},w=function(t){return _.data(b,E).prop(m,t),e(r)==F&&r.call(_,t,E),(h=E._clbstk_)&&(delete E._clbstk_,n.each(h,(function(e,a){a.call(_,t,E)}))),t},z=function(e,t){return E.rule=e,E.invalid=e,E.valid=!1,t&&(E.remote=t),_.data(p,e).removeClass(m),w(!1)},q=function(e){return E.rule=C,delete E.invalid,E.valid=!0,e&&(E.remote=e),_.data(p,null).removeClass(p),w(!0)};if(i||(i=n.validate.readRules(_),x=_.data(b)),x&&!i.equalto&&!i.dynamic&&x.value===y)return(E=x)._validating_&&n.now()-E._validating_<3e3?e(r)==F&&((h=E._clbstk_||(E._clbstk_=[]))[h.length]=r):E.valid?q():z(E.invalid),E.valid;if(i[g="trim"]&&(e(y)==c?y=n.trim(y):Array.isArray(y)&&(y=y.map(n.trim))),E.rules=i,E.value=y,i[g="required"]&&""===y)return z(g);if((g="minlength")in i&&""!==y&&String(y).length<i[g])return z(g);if((g="maxlength")in i&&-1<i[g]&&i[g]<String(y).length)return z(g);if(i[g="equalto"]&&((h=_.data("$"+g))&&h.length||((h=_.closest("form")).length||(h=n("body")),h=i[g].match(/^[a-z_]/)?h.find('[name="'+u(i[g])+'"]'):h.find(i[g]),_.data("$"+g,h)),!h.length||h.val()!=y))return z(g);if(i[g="noclass"]&&_.hasClass(i[g]))return z(g);if(i[g="email"]&&""!==y&&!d(y))return z(g);if(i[g="url"]&&""!==y&&!s(y))return z(g);if(i[g="domain"]&&""!==y&&!o(y))return z(g);if(i[g=v]&&""!==y){if(isNaN(+y))return z(g);E.value=y=parseFloat(y)}if((g="maxval")in i&&""!==y&&(h=i[g],e(y)==v&&(h=parseFloat(h)),h<y))return z(g);if((g="minval")in i&&""!==y&&(h=i[g],e(y)==v&&(h=parseFloat(h)),y<h))return z(g);var A=[];if(n.each(i,(function(t,a){if(a&&e(a)==F&&"remote"!=t){var i=a.call(E,y,_,E);if(!1===i)return z(t);if("error"==n.type(i))return E.remote=i,z(t);i&&i.then&&(i.rule=t,A.push(i))}})),m in E&&!E.valid)return!1;if((g="remote")in i){var j=l?n(l):_.closest("form"),O={action:"validate",field:a(_),value:y},$=i[g];if(l=j,j.length?O.form=a(j):j=null,e($)==F){if(!1===($=$.call(_,O,E)))return z(g);n.isPlainObject($)&&($=(O=$).url,delete O.url)}$||($=j||location.href);var k=n.when(n.ajax({url:$,data:O,method:"post",dataType:"json"})).then((function(e){if(!e||!e.ok)return Promise.reject(e)}));A.push(k)}if(A.length){E._validating_=n.now(),_.data(b,E),D=_.val();var P=!0,S=new Promise((function(e,t){n.each(A,(function(e,a){a.then((function(e){P&&(E.remote=e,D==_.val()&&((E.remotes||(E.remotes={}))[a.rule]=e))}),(function(e){P=!1,E.remote=e,D==_.val()&&z(a.rule,e),t(e)}))})),Promise.all(A).then((function(t){P&&(D==_.val()&&q(),e(t))}),n.noop)})),T=function(){delete E._validating_};return S.then(T,T),S}return q()}function l(e,t){return f(e?n(this):this,(function(e,t,i){var r=t.data("validatorOpt");if(!t.is(":input")){var l,u=t.find("[name]:input,[data-name]:input"),o=r._invalids,s={};f(u,(function(e,t){var i=a(t);if(t.prop("disabled"))i&&o&&delete o[i];else if(i){s[i]=t[0];var u=n.validate.readRules(t,r.rules[i]);if(null!=t.data("_orig_val_")||t.data("_orig_val_",t.val()),u&&!n.isEmptyObject(u)){r.rules[i]=u;var d=n.validate(t,u);d?delete o[i]:(l=!d,(o[i]||(o[i]={}))[t.data("invalid")]=t.val())}}})),n.each(o,(function(e){s[e]||delete o[e]})),r.valid=l,setTimeout((function(){g(n(i),r)}),10)}}))}function g(t,a,i){return a||(a=t.data("validatorOpt")),null==i&&(i=n.isEmptyObject(a._invalids)),!a.valid!=!i&&(a.valid=i,"object"==e(t.prop("valid"))||t.prop("valid",i),i?(t.removeClass(p),t.trigger("valid:form",[a])):(t.addClass(p).removeClass(m),t.trigger("invalid:form",[a]))),a.valid}function x(i,r,l,o,s){var d,f,v=new n.Event(r?m:p),F=l.invalid,h=s.$tgt||n(i),x=s.$ctx||h.closest("form"),_=s.name||a(h),b=s.opt||x.data("validatorOpt");if(n.extend(v,l),v.field=_,b&&(v.options=b),(d=s.evt)&&(v.src_evt=d),r)(d=l.remote&&l.remote.success)&&e(d)==c&&(v.message=d),h.removeClass(p).addClass(m);else{if(d=l.remote)v.message=d&&(d.msg||d.message||d.description)||d;else{var D=t(h,"placeholder");v.message=n.validate.msg(F,_,b,o||l.rules,D)}h.removeClass(m).addClass(p)}if((d=b.fieldGroup)&&(f=h.closest(d)).removeClass(r?p:m).addClass(r?m:p),d=b.hintElement){var y=h.next(d);y.length||(y=h.prev(d)),y.length||(y=h.siblings(d).first()),!y.length&&f&&(y=f.find(d)),y&&(r?y.text("").hide():v.message&&y.text(v.message).show())}if(h.trigger(v,[v.message,F]),r&&!h.is(":focus")){var C=x.is(":input")?x.closest("form"):x,E=C.find('[equalto="'+u(_)+'"]');(d=h.attr("id"))&&(E=E.add(C.find('[equalto="#'+u(_)+'"]'))),E.length&&E.trigger("validate")}r?(delete b._invalids[_],b.valid||g(x,b)):((d=b._invalids[_]||(b._invalids[_]={}))[F]=l.value,g(x,b,r))}function _(e){return n.isPlainObject(e)?n.extend(!0,{},n.validate.defaults,e):n.validate.defaults}return n.fn.validator=i,n.fn.validate=function(e,t){return n.validate(this,e,(function(a,n){t||x(this,a,n,e,{})})),this},n.validate=r,i.handler=function(e){var t,i=n(this),r=e&&e.target||this,l=n(r),u=a(l),o="_to_"+u,s=i.data("validatorOpt"),d=17;if(!u||!l.is(":input"))return;s?t=s[o]:i.data("validatorOpt",s={});var f=e&&e.type;if(f)switch(f){case"input":case"keyup":d=250;break;case"validate":case"focusout":case"blur":d=0}t&&clearTimeout(t);s[o]=t=setTimeout((function(){var t=s.rules;t&&(t=t[u]),n.validate(r,t,(function(a,n){x(r,a,n,t,{$tgt:l,$ctx:i,opt:s,evt:e,name:u})}),i),delete s[o]}),d)},r.readRules=function(e,a){e instanceof n||(e=n(e));var i=e.data("validation-rules");if(!i){i={};var r=t(e,"type");e.hasClass("trim")&&(i.trim=!0),n.each(["email","url","domain",v],(function(a,n){null==(a=t(e,n))&&r==n&&(a=!0),null!=a&&(i[n]=a)})),i.email&&(i.maxlength=320),n.each(["minlength","maxlength","trim"],(function(a,n){null!=(a=t(e,n))&&-1<(a=parseInt(a))&&(i[n]=a)})),n.each(["minval","maxval","required","equalto","noclass","remote"],(function(a,n){null!=(a=t(e,n))&&(i[n]=a)})),r==v&&n.each({min:"minval",max:"maxval"},(function(a,n){n in i||null!=(a=t(e,a))&&(i[n]=parseFloat(a))})),e.data("validation-rules",i)}return n.extend(a||(a={}),i),a},r.msg=function(e,t,a,n,i){var r,l=(a=_(a)).messages;if((r=l[t])&&(r=r[e])||(r=l._)&&(r=r[e]),r){n||(n=a.rules)&&(n=n[t]);var u=i||t.toUCFirst(),o=n[e];r=r.replace(/%f%/g,'"'.concat(u,'"')),null!=i&&(r=r.replace(/%p%/g,i)),null!=o&&(r=r.replace(/%r%/g,o))}return r},r.defaults={valid:void 0,hintElement:void 0,fieldGroup:void 0,validClass:m,invalidClass:p,rules:{},messages:{_:{email:"Email is not correct",url:"Not a valid URL",number:"Not a valid number",required:"%f% is required",equalto:"Fields don't match",minlength:"%f% must be %r% characters or more",maxlength:"%f% must be no more then %r% characters"},password:{required:"Password is required",equalto:"Passwords don't match"},password2:{equalto:"Passwords don't match"}}},n.extend(r,{is_domain:o,is_url:s,is_email:d,getName:a}),n.validate}return function(e){var t=e&&(e.jQuery||e.Zepto);t&&g(t)}("undefined"==typeof globalThis?"undefined"==typeof window?void 0:window:globalThis),g}));
//# sourceMappingURL=validate.min.js.map
